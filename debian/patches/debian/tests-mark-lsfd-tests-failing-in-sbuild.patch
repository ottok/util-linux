From: Chris Hofstaedtler <zeha@debian.org>
Date: Thu, 29 Feb 2024 23:22:41 +0100
Subject: tests: mark some lsfd as failing in sbuild

---
 tests/ts/lsfd/mkfds-inotify                        | 3 +++
 tests/ts/lsfd/mkfds-socketpair                     | 3 +++
 tests/ts/lsfd/mkfds-unix-stream-requiring-sockdiag | 3 +++
 3 files changed, 9 insertions(+)

diff --git a/tests/ts/lsfd/mkfds-inotify b/tests/ts/lsfd/mkfds-inotify
index a44fd77..05f2c00 100755
--- a/tests/ts/lsfd/mkfds-inotify
+++ b/tests/ts/lsfd/mkfds-inotify
@@ -25,6 +25,9 @@ ts_check_test_command "$TS_CMD_FINDMNT"
 ts_check_prog "stat"
 ts_check_prog "sed"
 
+# fails for unknown reasons in sbuild, https://github.com/util-linux/util-linux/issues/2819
+TS_KNOWN_FAIL="yes"
+
 ts_cd "$TS_OUTDIR"
 
 PID=
diff --git a/tests/ts/lsfd/mkfds-socketpair b/tests/ts/lsfd/mkfds-socketpair
index 3ef60c7..b1003e9 100755
--- a/tests/ts/lsfd/mkfds-socketpair
+++ b/tests/ts/lsfd/mkfds-socketpair
@@ -27,6 +27,9 @@ ts_check_test_command "$TS_HELPER_MKFDS"
 
 ts_check_prog "sed"
 
+# fails for unknown reasons in sbuild, https://github.com/util-linux/util-linux/issues/2822
+TS_KNOWN_FAIL="yes"
+
 ts_cd "$TS_OUTDIR"
 
 lsfd_check_sockdiag "unix"
diff --git a/tests/ts/lsfd/mkfds-unix-stream-requiring-sockdiag b/tests/ts/lsfd/mkfds-unix-stream-requiring-sockdiag
index 6189d0d..04c985a 100755
--- a/tests/ts/lsfd/mkfds-unix-stream-requiring-sockdiag
+++ b/tests/ts/lsfd/mkfds-unix-stream-requiring-sockdiag
@@ -21,6 +21,9 @@ TS_DESC="UNIX stream sockets"
 ts_init "$*"
 ts_skip_qemu_user
 
+# fails for unknown reasons in sbuild, https://github.com/util-linux/util-linux/issues/2822
+TS_KNOWN_FAIL="yes"
+
 . "$TS_SELF/lsfd-functions.bash"
 
 ts_check_test_command "$TS_CMD_LSFD"
